# 可观测性配置
observability:
  # Prometheus 地址
  prometheus:
    url: http://192.168.66.31:9190

  # Loki 地址
  loki:
    url: http://192.168.66.31:3400

  # Tempo 配置
  tempo:
    enabled: true
    endpoint: http://192.168.66.31:9411/api/v2/spans
    query-url: http://192.168.66.31:3200

  # 告警配置
  alert:
    # 邮件告警
    email:
      enabled: false  # 开发环境禁用，生产环境启用
      from: alert@basebackend.com
      to: admin@basebackend.com

    # 钉钉告警
    dingtalk:
      enabled: false
      webhook: https://oapi.dingtalk.com/robot/send?access_token=YOUR_TOKEN
      secret: YOUR_SECRET

    # 企业微信告警
    wechat:
      enabled: false
      webhook: https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_KEY

# 结构化日志配置
logging:
  config: classpath:logback-structured.xml
  structured:
    enabled: true
    loki-enabled: true
    loki-url: http://192.168.66.31:3400/loki/api/v1/push
    service-name: basebackend-admin-api
    environment: dev
# Spring AOP 配置
spring:
  aop:
    auto: true
    proxy-target-class: true

# Spring Boot Actuator 配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    prometheus:
      enabled: true
  metrics:
    tags:
      application: ${spring.application.name}
  tracing:
    sampling:
      probability: 1.0  # 开发环境100%采样，生产环境建议0.01-0.1
  prometheus:
    metrics:
      export:
        enabled: true
