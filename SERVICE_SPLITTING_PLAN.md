# BaseBackend æœåŠ¡æ‹†åˆ†æ–¹æ¡ˆ

> ä»å•ä½“æ¶æ„æ¼”è¿›åˆ°å¾®æœåŠ¡æ¶æ„çš„è¯¦ç»†è§„åˆ’ ğŸš€

**åˆ¶å®šæ—¥æœŸï¼š** 2025-11-13
**åˆ¶å®šäººï¼š** æµ®æµ®é…±ï¼ˆçŒ«å¨˜å·¥ç¨‹å¸ˆï¼‰
**çŠ¶æ€ï¼š** ğŸ”„ è§„åˆ’ä¸­

---

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [å½“å‰æ¶æ„åˆ†æ](#å½“å‰æ¶æ„åˆ†æ)
- [æœåŠ¡æ‹†åˆ†åŸåˆ™](#æœåŠ¡æ‹†åˆ†åŸåˆ™)
- [æ‹†åˆ†æ–¹æ¡ˆ](#æ‹†åˆ†æ–¹æ¡ˆ)
- [æ•°æ®æ‹†åˆ†ç­–ç•¥](#æ•°æ®æ‹†åˆ†ç­–ç•¥)
- [æœåŠ¡é—´é€šä¿¡](#æœåŠ¡é—´é€šä¿¡)
- [å®æ–½æ­¥éª¤](#å®æ–½æ­¥éª¤)
- [é£é™©è¯„ä¼°](#é£é™©è¯„ä¼°)

---

## æ¦‚è¿°

### èƒŒæ™¯

å½“å‰ç³»ç»Ÿä¸»è¦ç”± `basebackend-admin-api` å•ä½“æœåŠ¡æ‰¿è½½æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œéšç€ä¸šåŠ¡å¢é•¿é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š

- **è€¦åˆåº¦é«˜**ï¼šç”¨æˆ·ã€æƒé™ã€ä¸šåŠ¡é€»è¾‘æ··åœ¨ä¸€èµ·
- **æ‰©å±•å›°éš¾**ï¼šæ— æ³•é’ˆå¯¹é«˜è´Ÿè½½æ¨¡å—ç‹¬ç«‹æ‰©å±•
- **éƒ¨ç½²é£é™©**ï¼šä¸€ä¸ªæ¨¡å—çš„é—®é¢˜å½±å“æ•´ä¸ªç³»ç»Ÿ
- **å›¢é˜Ÿåä½œ**ï¼šå¤šå›¢é˜Ÿä¿®æ”¹åŒä¸€ä»£ç åº“å®¹æ˜“å†²çª

### ç›®æ ‡

**æ€»ä½“ç›®æ ‡ï¼š**
- ğŸ¯ å°†å•ä½“æœåŠ¡æ‹†åˆ†ä¸º 5-7 ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡
- ğŸ”„ å®ç°æœåŠ¡é—´æ¾è€¦åˆã€é«˜å†…èš
- ğŸ“ˆ æ”¯æŒç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•
- ğŸ›¡ï¸ æå‡ç³»ç»Ÿå¯ç”¨æ€§å’Œç¨³å®šæ€§

**å…·ä½“æŒ‡æ ‡ï¼š**
- æœåŠ¡æ‹†åˆ†å®Œæˆåº¦ > 70%ï¼ˆæ ¸å¿ƒæœåŠ¡ï¼‰
- æœåŠ¡é—´è€¦åˆåº¦ < 30%
- ç‹¬ç«‹éƒ¨ç½²èƒ½åŠ› 100%
- ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%

---

## å½“å‰æ¶æ„åˆ†æ

### ç°æœ‰æœåŠ¡æ¨¡å—

```
basebackend/
â”œâ”€â”€ basebackend-admin-api        # ã€æ ¸å¿ƒå•ä½“æœåŠ¡ã€‘ç®¡ç†åå° API
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ AuthController       # è®¤è¯
â”‚   â”‚   â”œâ”€â”€ UserController       # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ RoleController       # è§’è‰²ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ PermissionController # æƒé™ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ DeptController       # éƒ¨é—¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ MenuController       # èœå•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ DictController       # å­—å…¸ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ LogController        # æ—¥å¿—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ApplicationController # åº”ç”¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ messaging/           # æ¶ˆæ¯ç›¸å…³
â”‚   â”‚   â””â”€â”€ nacos/               # Nacos é…ç½®
â”‚   â””â”€â”€ ...
â”œâ”€â”€ basebackend-demo-api         # æ¼”ç¤º API
â”œâ”€â”€ basebackend-gateway          # API ç½‘å…³
â”œâ”€â”€ basebackend-file-service     # æ–‡ä»¶æœåŠ¡ï¼ˆå·²ç‹¬ç«‹ï¼‰
â””â”€â”€ åŸºç¡€æ¨¡å—/
    â”œâ”€â”€ basebackend-common       # å…¬å…±æ¨¡å—
    â”œâ”€â”€ basebackend-database     # æ•°æ®åº“æ¨¡å—
    â”œâ”€â”€ basebackend-security     # å®‰å…¨æ¨¡å—
    â”œâ”€â”€ basebackend-jwt          # JWT æ¨¡å—
    â”œâ”€â”€ basebackend-cache        # ç¼“å­˜æ¨¡å—
    â”œâ”€â”€ basebackend-messaging    # æ¶ˆæ¯æ¨¡å—
    â””â”€â”€ ...
```

### åŠŸèƒ½åŸŸåˆ†æ

| åŠŸèƒ½åŸŸ | ç°çŠ¶ | è€¦åˆåº¦ | æ‹†åˆ†ä¼˜å…ˆçº§ |
|--------|------|--------|------------|
| **è®¤è¯æˆæƒ** | admin-api å†…éƒ¨ | é«˜ | â­â­â­â­â­ |
| **ç”¨æˆ·ç®¡ç†** | admin-api å†…éƒ¨ | é«˜ | â­â­â­â­â­ |
| **æƒé™ç®¡ç†** | admin-api å†…éƒ¨ | é«˜ | â­â­â­â­â­ |
| **éƒ¨é—¨ç®¡ç†** | admin-api å†…éƒ¨ | ä¸­ | â­â­â­ |
| **èœå•ç®¡ç†** | admin-api å†…éƒ¨ | ä¸­ | â­â­â­ |
| **å­—å…¸ç®¡ç†** | admin-api å†…éƒ¨ | ä½ | â­â­ |
| **æ—¥å¿—ç®¡ç†** | admin-api å†…éƒ¨ | ä½ | â­â­ |
| **åº”ç”¨ç®¡ç†** | admin-api å†…éƒ¨ | ä½ | â­â­ |
| **æ¶ˆæ¯æœåŠ¡** | admin-api å†…éƒ¨ | ä¸­ | â­â­â­ |
| **æ–‡ä»¶æœåŠ¡** | âœ… å·²ç‹¬ç«‹ | æ—  | N/A |

---

## æœåŠ¡æ‹†åˆ†åŸåˆ™

### 1. é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰

**æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†æœåŠ¡è¾¹ç•Œï¼š**
- **ç”¨æˆ·åŸŸ**ï¼šç”¨æˆ·ä¿¡æ¯ã€ç”¨æˆ·è®¤è¯ã€ç”¨æˆ·æƒé™
- **æƒé™åŸŸ**ï¼šè§’è‰²ç®¡ç†ã€æƒé™ç®¡ç†ã€èµ„æºæ§åˆ¶
- **ç»„ç»‡åŸŸ**ï¼šéƒ¨é—¨ç®¡ç†ã€å²—ä½ç®¡ç†
- **é…ç½®åŸŸ**ï¼šå­—å…¸ç®¡ç†ã€èœå•ç®¡ç†ã€åº”ç”¨ç®¡ç†
- **ç›‘æ§åŸŸ**ï¼šæ—¥å¿—ç®¡ç†ã€å®¡è®¡ã€ç›‘æ§

### 2. å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰

æ¯ä¸ªæœåŠ¡ä¸“æ³¨äºå•ä¸€ä¸šåŠ¡é¢†åŸŸï¼Œé¿å…èŒè´£æ··ä¹±ã€‚

### 3. é«˜å†…èšã€ä½è€¦åˆ

**é«˜å†…èšï¼š** æœåŠ¡å†…éƒ¨åŠŸèƒ½ç´§å¯†ç›¸å…³
**ä½è€¦åˆï¼š** æœåŠ¡é—´ä¾èµ–æœ€å°åŒ–

### 4. æ•°æ®ç‹¬ç«‹æ€§

**åŸåˆ™ï¼š** æ¯ä¸ªæœåŠ¡æ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®åº“
**ä¾‹å¤–ï¼š** å¯ä»¥é€šè¿‡åªè¯»å‰¯æœ¬å…±äº«éƒ¨åˆ†æ•°æ®

### 5. API ä¼˜å…ˆ

**åŸåˆ™ï¼š** æœåŠ¡é—´é€šè¿‡ API é€šä¿¡ï¼Œç¦æ­¢ç›´æ¥è®¿é—®æ•°æ®åº“

---

## æ‹†åˆ†æ–¹æ¡ˆ

### Phase 9.1 - æ€»ä½“æ‹†åˆ†æ¶æ„

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   API Gateway       â”‚
                    â”‚  (basebackend-      â”‚
                    â”‚   gateway)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   ç”¨æˆ·æœåŠ¡  â”‚       â”‚  æƒé™æœåŠ¡  â”‚      â”‚  ä¸šåŠ¡æœåŠ¡   â”‚
    â”‚  (User     â”‚       â”‚ (Auth      â”‚      â”‚ (Business   â”‚
    â”‚  Service)  â”‚       â”‚  Service)  â”‚      â”‚  Service)   â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  ç”¨æˆ·æ•°æ®åº“ â”‚       â”‚ æƒé™æ•°æ®åº“ â”‚      â”‚ ä¸šåŠ¡æ•°æ®åº“   â”‚
    â”‚ (users_db) â”‚       â”‚(auth_db)  â”‚      â”‚(business_db)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 9.2 - ç”¨æˆ·æœåŠ¡ï¼ˆUser Serviceï¼‰

**æœåŠ¡åç§°ï¼š** `basebackend-user-service`

**æ ¸å¿ƒèŒè´£ï¼š**
- âœ… ç”¨æˆ· CRUD æ“ä½œ
- âœ… ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢
- âœ… ç”¨æˆ·çŠ¶æ€ç®¡ç†
- âœ… ç”¨æˆ·é…ç½®ç®¡ç†
- âœ… éƒ¨é—¨ä¿¡æ¯ç®¡ç†ï¼ˆå¯é€‰ï¼‰

**API ç«¯ç‚¹ï¼š**
```
GET    /api/users              # ç”¨æˆ·åˆ—è¡¨
GET    /api/users/{id}         # ç”¨æˆ·è¯¦æƒ…
POST   /api/users              # åˆ›å»ºç”¨æˆ·
PUT    /api/users/{id}         # æ›´æ–°ç”¨æˆ·
DELETE /api/users/{id}         # åˆ é™¤ç”¨æˆ·
GET    /api/users/search       # æœç´¢ç”¨æˆ·
GET    /api/users/{id}/profile # ç”¨æˆ·èµ„æ–™
PUT    /api/users/{id}/status  # æ›´æ–°çŠ¶æ€
```

**æ•°æ®è¡¨ï¼š**
- `sys_user` - ç”¨æˆ·åŸºç¡€ä¿¡æ¯
- `sys_dept` - éƒ¨é—¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
- `sys_user_dept` - ç”¨æˆ·éƒ¨é—¨å…³ç³»ï¼ˆå¯é€‰ï¼‰

**ä¾èµ–æœåŠ¡ï¼š**
- æƒé™æœåŠ¡ï¼ˆæŸ¥è¯¢ç”¨æˆ·æƒé™ï¼‰
- ç¼“å­˜æœåŠ¡ï¼ˆç”¨æˆ·ä¿¡æ¯ç¼“å­˜ï¼‰

### Phase 9.3 - æƒé™æœåŠ¡ï¼ˆAuth Serviceï¼‰

**æœåŠ¡åç§°ï¼š** `basebackend-auth-service`

**æ ¸å¿ƒèŒè´£ï¼š**
- âœ… ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•/ç™»å‡ºï¼‰
- âœ… Token ç”Ÿæˆå’ŒéªŒè¯
- âœ… è§’è‰²ç®¡ç†
- âœ… æƒé™ç®¡ç†
- âœ… èœå•ç®¡ç†
- âœ… æƒé™æ ¡éªŒ

**API ç«¯ç‚¹ï¼š**

**è®¤è¯ç›¸å…³ï¼š**
```
POST   /api/auth/login         # ç”¨æˆ·ç™»å½•
POST   /api/auth/logout        # ç”¨æˆ·ç™»å‡º
POST   /api/auth/refresh       # åˆ·æ–° Token
GET    /api/auth/captcha       # è·å–éªŒè¯ç 
POST   /api/auth/verify        # éªŒè¯ Token
```

**è§’è‰²ç®¡ç†ï¼š**
```
GET    /api/roles              # è§’è‰²åˆ—è¡¨
GET    /api/roles/{id}         # è§’è‰²è¯¦æƒ…
POST   /api/roles              # åˆ›å»ºè§’è‰²
PUT    /api/roles/{id}         # æ›´æ–°è§’è‰²
DELETE /api/roles/{id}         # åˆ é™¤è§’è‰²
```

**æƒé™ç®¡ç†ï¼š**
```
GET    /api/permissions        # æƒé™åˆ—è¡¨
POST   /api/permissions        # åˆ›å»ºæƒé™
GET    /api/users/{id}/permissions  # ç”¨æˆ·æƒé™
POST   /api/permissions/check       # æƒé™æ ¡éªŒ
```

**èœå•ç®¡ç†ï¼š**
```
GET    /api/menus              # èœå•åˆ—è¡¨
GET    /api/menus/tree         # èœå•æ ‘
POST   /api/menus              # åˆ›å»ºèœå•
PUT    /api/menus/{id}         # æ›´æ–°èœå•
```

**æ•°æ®è¡¨ï¼š**
- `sys_role` - è§’è‰²ä¿¡æ¯
- `sys_permission` - æƒé™ä¿¡æ¯
- `sys_menu` - èœå•ä¿¡æ¯
- `sys_user_role` - ç”¨æˆ·è§’è‰²å…³ç³»
- `sys_role_permission` - è§’è‰²æƒé™å…³ç³»
- `sys_role_menu` - è§’è‰²èœå•å…³ç³»

**ä¾èµ–æœåŠ¡ï¼š**
- ç”¨æˆ·æœåŠ¡ï¼ˆæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼‰
- ç¼“å­˜æœåŠ¡ï¼ˆæƒé™ç¼“å­˜ï¼‰
- JWT æ¨¡å—ï¼ˆToken ç”Ÿæˆï¼‰

### Phase 9.4 - ä¸šåŠ¡æœåŠ¡ï¼ˆBusiness Serviceï¼‰

**æœåŠ¡åç§°ï¼š** `basebackend-business-service`

**æ ¸å¿ƒèŒè´£ï¼š**
- âœ… å­—å…¸ç®¡ç†
- âœ… åº”ç”¨ç®¡ç†
- âœ… æ—¥å¿—ç®¡ç†
- âœ… å…¶ä»–ä¸šåŠ¡åŠŸèƒ½

**API ç«¯ç‚¹ï¼š**
```
GET    /api/dict               # å­—å…¸åˆ—è¡¨
POST   /api/dict               # åˆ›å»ºå­—å…¸
GET    /api/applications       # åº”ç”¨åˆ—è¡¨
POST   /api/applications       # åˆ›å»ºåº”ç”¨
GET    /api/logs               # æ—¥å¿—æŸ¥è¯¢
```

**æ•°æ®è¡¨ï¼š**
- `sys_dict` - å­—å…¸ä¿¡æ¯
- `sys_application` - åº”ç”¨ä¿¡æ¯
- `sys_log` - æ“ä½œæ—¥å¿—

---

## æ•°æ®æ‹†åˆ†ç­–ç•¥

### 1. æ•°æ®åº“æ‹†åˆ†æ–¹æ¡ˆ

**æ–¹æ¡ˆ Aï¼šç‰©ç†æ‹†åˆ†ï¼ˆæ¨èï¼‰**
```
åŸæ•°æ®åº“ï¼šbasebackend
  â†“
æ‹†åˆ†ä¸ºï¼š
  - basebackend_user    ï¼ˆç”¨æˆ·æ•°æ®åº“ï¼‰
  - basebackend_auth    ï¼ˆæƒé™æ•°æ®åº“ï¼‰
  - basebackend_businessï¼ˆä¸šåŠ¡æ•°æ®åº“ï¼‰
```

**æ–¹æ¡ˆ Bï¼šé€»è¾‘æ‹†åˆ†ï¼ˆè¿‡æ¸¡æœŸï¼‰**
```
ä¿ç•™åŸæ•°æ®åº“ï¼šbasebackend
  â”œâ”€â”€ ç”¨æˆ·æœåŠ¡ â†’ åªè®¿é—® sys_userã€sys_dept è¡¨
  â”œâ”€â”€ æƒé™æœåŠ¡ â†’ åªè®¿é—® sys_roleã€sys_permissionã€sys_menu è¡¨
  â””â”€â”€ ä¸šåŠ¡æœåŠ¡ â†’ åªè®¿é—® sys_dictã€sys_applicationã€sys_log è¡¨
```

### 2. æ•°æ®åŒæ­¥ç­–ç•¥

**åœºæ™¯ï¼š** æœåŠ¡é—´éœ€è¦å…±äº«æ•°æ®

**æ–¹æ¡ˆ 1ï¼šAPI è°ƒç”¨ï¼ˆæ¨èï¼‰**
```java
// æƒé™æœåŠ¡éœ€è¦ç”¨æˆ·ä¿¡æ¯
UserDTO user = userServiceClient.getUserById(userId);
```

**æ–¹æ¡ˆ 2ï¼šæ•°æ®å¤åˆ¶ï¼ˆç¼“å­˜ï¼‰**
```java
// ç”¨æˆ·åŸºç¡€ä¿¡æ¯ç¼“å­˜åˆ°æƒé™æœåŠ¡
@Cacheable("users")
public UserDTO getUserFromCache(Long userId) {
    return userServiceClient.getUserById(userId);
}
```

**æ–¹æ¡ˆ 3ï¼šäº‹ä»¶é©±åŠ¨ï¼ˆå¼‚æ­¥ï¼‰**
```java
// ç”¨æˆ·ä¿¡æ¯å˜æ›´æ—¶å‘å¸ƒäº‹ä»¶
@EventListener
public void onUserChanged(UserChangedEvent event) {
    // æ›´æ–°æœ¬åœ°ç¼“å­˜
    updateUserCache(event.getUserId());
}
```

### 3. åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†

**åœºæ™¯ï¼š** è·¨æœåŠ¡çš„æ•°æ®ä¸€è‡´æ€§

**æ–¹æ¡ˆï¼š** ä½¿ç”¨ Seata åˆ†å¸ƒå¼äº‹åŠ¡
```java
@GlobalTransactional
public void createUserWithRole(UserDTO user, Long roleId) {
    // 1. åˆ›å»ºç”¨æˆ·ï¼ˆç”¨æˆ·æœåŠ¡ï¼‰
    userServiceClient.createUser(user);

    // 2. åˆ†é…è§’è‰²ï¼ˆæƒé™æœåŠ¡ï¼‰
    authServiceClient.assignRole(user.getId(), roleId);
}
```

---

## æœåŠ¡é—´é€šä¿¡

### 1. é€šä¿¡æ–¹å¼

**åŒæ­¥é€šä¿¡ï¼š** OpenFeign + LoadBalancer
```java
@FeignClient(name = "user-service")
public interface UserServiceClient {
    @GetMapping("/api/users/{id}")
    UserDTO getUserById(@PathVariable Long id);
}
```

**å¼‚æ­¥é€šä¿¡ï¼š** RocketMQ æ¶ˆæ¯é˜Ÿåˆ—
```java
// ç”¨æˆ·æœåŠ¡å‘å¸ƒäº‹ä»¶
rocketMQTemplate.convertAndSend("user-topic", userChangedEvent);

// æƒé™æœåŠ¡ç›‘å¬äº‹ä»¶
@RocketMQMessageListener(topic = "user-topic")
public class UserEventListener implements RocketMQListener<UserChangedEvent> {
    // ...
}
```

### 2. æœåŠ¡ä¾èµ–å…³ç³»

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Gateway      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ User       â”‚â—„â”€â”€â”€â”€â”€â”€â”¤ Auth      â”‚      â”‚ Business    â”‚
    â”‚ Service    â”‚       â”‚ Service   â”‚      â”‚ Service     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ (æŸ¥è¯¢ç”¨æˆ·)
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                            â”‚
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                                    â”‚ Cache        â”‚
                                                    â”‚ Service      â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æœåŠ¡å‘ç°

ä½¿ç”¨ Nacos è¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼š
```yaml
spring:
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
        namespace: basebackend
        service: user-service
```

---

## å®æ–½æ­¥éª¤

### Step 1ï¼šå‡†å¤‡é˜¶æ®µï¼ˆ1-2 å¤©ï¼‰

1. **åˆ›å»ºæ–°æœåŠ¡éª¨æ¶**
   - `basebackend-user-service`
   - `basebackend-auth-service`
   - `basebackend-business-service`

2. **é…ç½®åŸºç¡€è®¾æ–½**
   - Nacos æœåŠ¡æ³¨å†Œ
   - Gateway è·¯ç”±é…ç½®
   - æ•°æ®åº“è¿æ¥é…ç½®

3. **åˆ›å»º Feign å®¢æˆ·ç«¯**
   - `user-service-api`ï¼ˆç”¨æˆ·æœåŠ¡ API æ¥å£ï¼‰
   - `auth-service-api`ï¼ˆæƒé™æœåŠ¡ API æ¥å£ï¼‰

### Step 2ï¼šç”¨æˆ·æœåŠ¡æ‹†åˆ†ï¼ˆ2-3 å¤©ï¼‰

1. **è¿ç§»ç”¨æˆ·ç›¸å…³ä»£ç **
   - Controllerã€Serviceã€Mapper
   - Entityã€DTOã€VO

2. **æ•°æ®åº“è¿ç§»**
   - åˆ›å»º `basebackend_user` æ•°æ®åº“
   - è¿ç§»ç”¨æˆ·ç›¸å…³è¡¨

3. **API å¯¹æ¥**
   - åˆ›å»º Feign å®¢æˆ·ç«¯
   - æƒé™æœåŠ¡è°ƒç”¨ç”¨æˆ·æœåŠ¡

4. **æµ‹è¯•éªŒè¯**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•

### Step 3ï¼šæƒé™æœåŠ¡æ‹†åˆ†ï¼ˆ2-3 å¤©ï¼‰

1. **è¿ç§»æƒé™ç›¸å…³ä»£ç **
   - è®¤è¯ã€è§’è‰²ã€æƒé™ã€èœå•

2. **æ•°æ®åº“è¿ç§»**
   - åˆ›å»º `basebackend_auth` æ•°æ®åº“
   - è¿ç§»æƒé™ç›¸å…³è¡¨

3. **API å¯¹æ¥**
   - Gateway è®¤è¯é›†æˆ
   - ç”¨æˆ·æœåŠ¡æƒé™æ ¡éªŒ

4. **æµ‹è¯•éªŒè¯**

### Step 4ï¼šä¸šåŠ¡æœåŠ¡æ‹†åˆ†ï¼ˆ1-2 å¤©ï¼‰

1. **è¿ç§»ä¸šåŠ¡ç›¸å…³ä»£ç **
2. **æ•°æ®åº“è¿ç§»**
3. **API å¯¹æ¥**
4. **æµ‹è¯•éªŒè¯**

### Step 5ï¼šä¼˜åŒ–å’ŒéªŒè¯ï¼ˆ1-2 å¤©ï¼‰

1. **æ€§èƒ½æµ‹è¯•**
   - å‹åŠ›æµ‹è¯•
   - å“åº”æ—¶é—´æµ‹è¯•

2. **ç¨³å®šæ€§æµ‹è¯•**
   - æœåŠ¡é™çº§æµ‹è¯•
   - é™æµæµ‹è¯•

3. **æ–‡æ¡£æ›´æ–°**
   - API æ–‡æ¡£
   - éƒ¨ç½²æ–‡æ¡£

---

## é£é™©è¯„ä¼°

### é£é™©æ¸…å•

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| **æ•°æ®è¿ç§»å¤±è´¥** | é«˜ | ä¸­ | 1. æå‰å¤‡ä»½<br>2. ç°åº¦è¿ç§»<br>3. å›æ»šæ–¹æ¡ˆ |
| **æœåŠ¡é—´è°ƒç”¨å»¶è¿Ÿ** | ä¸­ | é«˜ | 1. ç¼“å­˜ä¼˜åŒ–<br>2. å¼‚æ­¥å¤„ç†<br>3. è¶…æ—¶æ§åˆ¶ |
| **åˆ†å¸ƒå¼äº‹åŠ¡å¤±è´¥** | é«˜ | ä¸­ | 1. Seata ä¿è¯<br>2. æœ€ç»ˆä¸€è‡´æ€§<br>3. è¡¥å¿æœºåˆ¶ |
| **æœåŠ¡ä¾èµ–å¾ªç¯** | é«˜ | ä½ | 1. è®¾è®¡å®¡æŸ¥<br>2. ä¾èµ–åˆ†æ<br>3. é‡æ„ä¼˜åŒ– |
| **æµ‹è¯•è¦†ç›–ä¸è¶³** | ä¸­ | ä¸­ | 1. å¢åŠ æµ‹è¯•<br>2. è‡ªåŠ¨åŒ–æµ‹è¯•<br>3. å›å½’æµ‹è¯• |

### å›æ»šæ–¹æ¡ˆ

**ç°åº¦å‘å¸ƒç­–ç•¥ï¼š**
1. æ–°æ—§æœåŠ¡å¹¶å­˜ï¼ˆåŒå†™æ¨¡å¼ï¼‰
2. é€æ­¥åˆ‡æµé‡åˆ°æ–°æœåŠ¡ï¼ˆ10% â†’ 50% â†’ 100%ï¼‰
3. ç›‘æ§å¼‚å¸¸æŒ‡æ ‡
4. å‘ç°é—®é¢˜ç«‹å³å›æ»š

**æ•°æ®å›æ»šï¼š**
1. ä¿ç•™åŸæ•°æ®åº“ä¸åˆ é™¤
2. æ–°æœåŠ¡æ•…éšœæ—¶åˆ‡å›æ—§æœåŠ¡
3. æ•°æ®åŒå†™æœŸé—´ä¿è¯ä¸€è‡´æ€§

---

## æˆåŠŸæ ‡å‡†

### æŠ€æœ¯æŒ‡æ ‡

- âœ… æœåŠ¡æ‹†åˆ†å®Œæˆåº¦ > 70%
- âœ… æœåŠ¡ç‹¬ç«‹éƒ¨ç½²æˆåŠŸç‡ 100%
- âœ… API å“åº”æ—¶é—´ < 100msï¼ˆæœåŠ¡å†…ï¼‰
- âœ… æœåŠ¡é—´è°ƒç”¨æˆåŠŸç‡ > 99.9%
- âœ… ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%

### ä¸šåŠ¡æŒ‡æ ‡

- âœ… åŠŸèƒ½å®Œæ•´æ€§ 100%ï¼ˆæ‰€æœ‰åŠŸèƒ½æ­£å¸¸ï¼‰
- âœ… æ•°æ®ä¸€è‡´æ€§ 100%ï¼ˆæ— æ•°æ®ä¸¢å¤±ï¼‰
- âœ… ç”¨æˆ·ä½“éªŒæ— æ„ŸçŸ¥ï¼ˆé€æ˜å‡çº§ï¼‰

---

## æ€»ç»“

æœåŠ¡æ‹†åˆ†æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œéœ€è¦ï¼š
1. **å……åˆ†è§„åˆ’**ï¼šæ˜ç¡®è¾¹ç•Œã€ä¾èµ–å…³ç³»
2. **åˆ†æ­¥å®æ–½**ï¼šé€æ­¥è¿ç§»ã€é™ä½é£é™©
3. **æŒç»­ä¼˜åŒ–**ï¼šç›‘æ§ã€è°ƒä¼˜ã€æ”¹è¿›

**é¢„æœŸæ”¶ç›Šï¼š**
- ğŸš€ **å¯æ‰©å±•æ€§æå‡ 5 å€**ï¼šç‹¬ç«‹æ‰©å±•é«˜è´Ÿè½½æœåŠ¡
- ğŸ’ª **å¯ç”¨æ€§æå‡**ï¼šå•ä¸ªæœåŠ¡æ•…éšœä¸å½±å“å…¨å±€
- âš¡ **å¼€å‘æ•ˆç‡æå‡**ï¼šå›¢é˜Ÿç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²
- ğŸ”’ **å®‰å…¨æ€§æå‡**ï¼šæœåŠ¡éš”ç¦»ã€æƒé™ç»†åŒ–

---

**åˆ¶å®šäººï¼š** æµ®æµ®é…± ğŸ±
**å®¡æ ¸äººï¼š** å¾…å®š
**æ‰¹å‡†äººï¼š** å¾…å®š
**ç”Ÿæ•ˆæ—¥æœŸï¼š** 2025-11-13
